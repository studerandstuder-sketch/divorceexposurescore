<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Divorce Exposure Score‚Ñ¢</title>
  <meta name="description" content="Instant, private Divorce Exposure Score on a 300‚Äì850 scale.">
  <style>
    :root{
      --pri:#5e2bb8; --grad-start:#6a2ad9; --grad-end:#2e6bff;
      --good:#0f9d58; --warn:#fb8c00; --bad:#d93025;
      --bg:#f7f8fc; --card:#fff; --text:#0b1220; --muted:#5b6b87; --border:#e6e9f2;
      --shadow:0 10px 30px rgba(18,24,40,.06);
    }
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.5 system-ui,Inter,Segoe UI,Roboto,Arial;color:var(--text);background:var(--bg)}
    header{background:linear-gradient(135deg,var(--grad-start),var(--grad-end));color:#fff;padding:22px 0}
    .wrap{max-width:1100px;margin:0 auto;padding:0 18px}
    .brand{display:flex;align-items:center;gap:14px}
    .logo{display:flex;gap:6px}
    .dot{width:9px;height:9px;border-radius:3px;display:inline-block}
    .d1{background:#6a2ad9}.d2{background:#2a6bff}.d3{background:#e94196}.d4{background:#00c2ff}
    .brand h1{margin:0;font-size:22px;font-weight:800}
    .brand small{display:block;opacity:.9;font-weight:600}
    main{padding:34px 18px}
    .grid{display:grid;grid-template-columns:1.2fr .8fr;gap:22px}
    @media (max-width:980px){.grid{grid-template-columns:1fr}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:24px;box-shadow:var(--shadow)}
    h2{font-size:22px;font-weight:800;margin:0 0 12px}
    .muted{color:var(--muted);font-size:14px}
    fieldset{border:1px solid var(--border);border-radius:12px;padding:14px;margin:0 0 12px}
    fieldset legend{font-weight:700;color:#1f2937}
    label.option{display:block;border-radius:10px;padding:10px 12px;margin:6px 0;border:1px solid #eef1f6}
    label.option:hover{background:#f8f9ff}
    input[type=radio]{margin-right:8px}
    .btn{display:inline-block;background:var(--pri);color:#fff;padding:12px 20px;border-radius:10px;text-decoration:none;font-weight:800;border:none;cursor:pointer}
    .btn.alt{background:#2e6bff}
    .btn.primary{background:#6a2ad9}
    .btn.disabled{opacity:.5;pointer-events:none}
    .actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
    .badge{display:inline-block;background:#eef1ff;border:1px solid #e2e7f8;color:#25324d;border-radius:999px;padding:6px 10px;font-size:12px;font-weight:800}
    .scorebox{display:flex;align-items:center;gap:16px}
    .score-circle{position:relative;display:inline-block}
    #progressArc{transition:stroke .25s ease, stroke-dashoffset .25s ease}
    .center{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}
    .center .n{font-size:36px;font-weight:900}
    .center .b{font-size:13px;font-weight:700;color:#5b6b87;margin-top:2px}
    .center .r{font-size:11px;color:#7a889e;margin-top:2px}
    .error{border-color:#ffcccb}
    .warn{color:#b45309}
    .subcard{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:20px;margin-top:16px;box-shadow:var(--shadow)}
  </style>
</head>
<body>
<header>
  <div class="wrap">
    <div class="brand">
      <div class="logo"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span><span class="dot d4"></span></div>
      <div>
        <h1>Marital Risk Analytics LLC</h1>
        <small>Divorce Exposure Score‚Ñ¢</small>
      </div>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="grid">
    <!-- LEFT: Questionnaire -->
    <section id="questionnaire" class="card">
      <h2>Answer 13 questions (about 3 minutes)</h2>
      <p class="muted">We estimate your exposure based on how your assets, accounts, and household factors are set up today.</p>

      <!-- 1 Prenup -->
      <fieldset data-key="prenup"><legend>üìú Pre- / Postnup / Where You Live</legend>
        <label class="option"><input type="radio" name="prenup" value="100"> Prenup/postnup fits where we live now</label>
        <label class="option"><input type="radio" name="prenup" value="30"> Prenup/postnup exists, not updated after moving</label>
        <label class="option"><input type="radio" name="prenup" value="15"> No prenup; community-property/cross-border</label>
        <label class="option"><input type="radio" name="prenup" value="5"> No prenup; moved a lot, unclear law</label>
      </fieldset>

      <!-- 2 Home -->
      <fieldset data-key="home"><legend>üè† Primary Home</legend>
        <label class="option"><input type="radio" name="home" value="100"> We rent, no house to split</label>
        <label class="option"><input type="radio" name="home" value="70"> Title only in my name/entity</label>
        <label class="option"><input type="radio" name="home" value="5"> Joint title but I fully pay</label>
        <label class="option"><input type="radio" name="home" value="70"> Joint title, both contribute fairly</label>
      </fieldset>

      <!-- 3 Income split -->
      <fieldset data-key="incomesplit"><legend>üíº Household Income Split</legend>
        <label class="option"><input type="radio" name="incomesplit" value="100"> Roughly 50 / 50</label>
        <label class="option"><input type="radio" name="incomesplit" value="80"> About 60 / 40</label>
        <label class="option"><input type="radio" name="incomesplit" value="50"> About 80 / 20</label>
        <label class="option"><input type="radio" name="incomesplit" value="30"> About 90 / 10</label>
        <label class="option"><input type="radio" name="incomesplit" value="15"> Single earner (one spouse covers most)</label>
      </fieldset>

      <!-- 4 Years married -->
      <fieldset data-key="years"><legend>‚è≥ Years Married</legend>
        <label class="option"><input type="radio" name="years" value="100"> Under 3 years</label>
        <label class="option"><input type="radio" name="years" value="80"> 3 ‚Äì 7 years</label>
        <label class="option"><input type="radio" name="years" value="50"> 7 ‚Äì 15 years</label>
        <label class="option"><input type="radio" name="years" value="30"> 15+ years</label>
      </fieldset>

      <!-- 5 Kids -->
      <fieldset data-key="kids"><legend>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Kids / Dependents</legend>
        <label class="option"><input type="radio" name="kids" value="100"> None</label>
        <label class="option"><input type="radio" name="kids" value="80"> One</label>
        <label class="option"><input type="radio" name="kids" value="70"> Two</label>
        <label class="option"><input type="radio" name="kids" value="50"> Three or more</label>
      </fieldset>

      <!-- 6 Rentals -->
      <fieldset data-key="rentals"><legend>üè¢ Rentals / Other Properties</legend>
        <label class="option"><input type="radio" name="rentals" value="100"> None</label>
        <label class="option"><input type="radio" name="rentals" value="30"> Owned via separate entity/trust</label>
        <label class="option"><input type="radio" name="rentals" value="15"> Jointly owned, mixed contributions</label>
        <label class="option"><input type="radio" name="rentals" value="5"> Jointly owned and I mostly pay</label>
      </fieldset>

      <!-- 7 K-1 -->
      <fieldset data-key="k1"><legend>üìà Business Interests (K-1 etc.)</legend>
        <label class="option"><input type="radio" name="k1" value="100"> None</label>
        <label class="option"><input type="radio" name="k1" value="70"> Separate + documented distributions</label>
        <label class="option"><input type="radio" name="k1" value="15"> Some commingling or unclear records</label>
        <label class="option"><input type="radio" name="k1" value="5"> Significant commingling with marital</label>
      </fieldset>

      <!-- 8 Crypto -->
      <fieldset data-key="crypto"><legend>üí± Crypto & Digital Assets</legend>
        <label class="option"><input type="radio" name="crypto" value="100"> None</label>
        <label class="option"><input type="radio" name="crypto" value="70"> Separate + tracked</label>
        <label class="option"><input type="radio" name="crypto" value="5"> Shared and/or not tracked</label>
        <label class="option"><input type="radio" name="crypto" value="5"> Unclear custody/keys</label>
      </fieldset>

      <!-- 9 Retirement -->
      <fieldset data-key="retire"><legend>ü™ô Retirement & Investments</legend>
        <label class="option"><input type="radio" name="retire" value="100"> Separate + documented</label>
        <label class="option"><input type="radio" name="retire" value="30"> Mostly separate; some shared</label>
        <label class="option"><input type="radio" name="retire" value="15"> Joint accounts, unclear sources</label>
        <label class="option"><input type="radio" name="retire" value="5"> Mostly joint and I mostly fund</label>
      </fieldset>

      <!-- 10 Banking -->
      <fieldset data-key="banking"><legend>üè¶ Banking & Cash Flow</legend>
        <label class="option"><input type="radio" name="banking" value="100"> Separate accounts, clear transfers</label>
        <label class="option"><input type="radio" name="banking" value="70"> Mostly separate; one joint for bills</label>
        <label class="option"><input type="radio" name="banking" value="15"> Joint accounts, mixed expenses</label>
        <label class="option"><input type="radio" name="banking" value="5"> Joint accounts and I mostly fund</label>
      </fieldset>

      <!-- 11 Business Use -->
      <fieldset data-key="bizuse"><legend>üßæ Business Use of Personal Accounts</legend>
        <label class="option"><input type="radio" name="bizuse" value="100"> No mixing</label>
        <label class="option"><input type="radio" name="bizuse" value="50"> Rare/low amounts</label>
        <label class="option"><input type="radio" name="bizuse" value="15"> Some commingling</label>
        <label class="option"><input type="radio" name="bizuse" value="5"> Frequent/large commingling</label>
      </fieldset>

      <!-- 12 Debts -->
      <fieldset data-key="debt"><legend>üí≥ Debts & Credit</legend>
        <label class="option"><input type="radio" name="debt" value="100"> Separate, clear ownership</label>
        <label class="option"><input type="radio" name="debt" value="70"> Few joint items</label>
        <label class="option"><input type="radio" name="debt" value="15"> Many joint items</label>
        <label class="option"><input type="radio" name="debt" value="5"> Mostly joint and I mostly pay</label>
      </fieldset>

      <!-- 13 Taxes -->
      <fieldset data-key="tax"><legend>üßæ Taxes & Disclosure</legend>
        <label class="option"><input type="radio" name="tax" value="100"> Filed, organized, full disclosure</label>
        <label class="option"><input type="radio" name="tax" value="70"> Filed, some gaps</label>
        <label class="option"><input type="radio" name="tax" value="15"> Late/unclear</label>
        <label class="option"><input type="radio" name="tax" value="5"> Missing/messy</label>
      </fieldset>

      <div id="formHint" class="muted warn" style="display:none;margin-top:6px;">Please answer all 13 sections.</div>

      <div class="actions" style="margin-top:16px;">
        <button type="button" class="btn primary" onclick="runCompute()">Calculate My Score</button>
      </div>
      <p class="muted" style="margin-top:6px;">
        Informational diagnostic only ‚Äî not legal, tax, or financial advice.
      </p>
    </section>

    <!-- RIGHT: How it works -->
    <aside class="card">
      <h2>How this works</h2>
      <ul class="muted">
        <li>Private, instant screening on a 300‚Äì850 scale.</li>
        <li>We look at how your assets & accounts are set up, not your relationship.</li>
        <li>Upgrade any time for deeper analysis and step-by-step recommendations.</li>
      </ul>

      <!-- Results subcard -->
      <section id="results" class="subcard">
        <h3 style="margin-top:0">Your Divorce Exposure Score‚Ñ¢</h3>
        <div class="scorebox">
          <div class="score-circle">
            <svg viewBox="0 0 200 200" width="160" height="160" aria-label="Score gauge">
              <circle cx="100" cy="100" r="90" stroke="#eef0f5" stroke-width="20" fill="none"></circle>
              <circle id="progressArc" cx="100" cy="100" r="90" stroke="#5e2bb8" stroke-width="20" fill="none"
                      stroke-dasharray="565.48" stroke-dashoffset="565.48" stroke-linecap="round"
                      transform="rotate(-90 100 100)"></circle>
            </svg>
            <div class="center">
              <div id="gaugeNumber" class="n">‚Äî</div>
              <div id="gaugeBand" class="b">Start</div>
              <div class="r">300 ‚Äì 850</div>
            </div>
          </div>
          <div>
            <div id="bandPill" class="badge">‚Äî</div>
            <p id="messageText" class="muted" style="max-width:520px;margin-top:8px;">Your message will appear here once you answer.</p>
          </div>
        </div>

        <!-- Dynamic explanation placeholder -->
        <p id="scoreExplanation" class="muted" style="margin-top:12px;"></p>

        <div class="actions">
          <a id="toPhase2" href="#" class="btn alt disabled" aria-disabled="true" tabindex="-1">Personal Marital Risk Analysis ($49)</a>
          <a id="toPremium" href="#" class="btn primary disabled" aria-disabled="true" tabindex="-1">Premium Marital Risk Analysis &amp; Recommendation ($699)</a>
        </div>

        <!-- Important Notice block -->
        <div class="subcard" style="margin-top:20px; background:#fdfdfd;">
          <h4 style="margin-top:0">Important Notice</h4>
          <p>Your Divorce Exposure Score‚Ñ¢ is an informational tool only. It gives you a first indication of where you might stand, but it is not legal, financial, or tax advice. Divorce laws can differ by state, country, and sometimes even by city.</p>
          <p>Whatever your score is, we strongly recommend going one step further:</p>
          <ul>
            <li><strong>Personal Marital Risk Analysis ($49):</strong> A tailored review of your current setup to highlight your specific risks.</li>
            <li><strong>Premium Marital Risk Analysis &amp; Recommendation ($699):</strong> A deep dive into your financial and marital behavior, with direct recommendations to make small adjustments that could save thousands (or even millions) of dollars, while limiting the chance of being challenged in the future.</li>
          </ul>
          <p><strong>‚ö° Act now</strong> ‚Äî a small step today can protect you from major losses tomorrow.</p>
        </div>
      </section>
    </aside>
  </div>
</main>

<script>
// -----------------------------
// SCORING + CHECKOUT (single script)
// -----------------------------

// === GENTLER SCORING MODEL v3 (normalized for extra factors) ===
const W = {
  prenup:   .20,
  home:     .13,
  incomesplit: .06,
  years:       .04,
  kids:        .04,
  rentals:  .09,
  k1:       .09,
  crypto:   .05,
  retire:   .11,
  banking:  .08,
  bizuse:   .05,
  debt:     .05,
  tax:      .05
};
const KEYS = Object.keys(W);
const KEYS_ARR = KEYS;
const SCORE_MIN = 300, SCORE_MAX = 850;

const toPct = v => Math.max(0, Math.min(100, Number(v || 0))) / 100;
const WEIGHT_SUM = Object.values(W).reduce((a,b)=>a+b, 0);

function collectAnswers(){
  const vals = {};
  const answers = {};
  document.querySelectorAll('fieldset[data-key]').forEach(fs=>{
    const key = fs.dataset.key;
    const checked = fs.querySelector('input[type="radio"]:checked');
    if (checked){
      vals[key] = Number(checked.value);
      const labelText = checked.closest('label').innerText.trim();
      answers[key] = { value: Number(checked.value), label: labelText };
    }
  });
  const complete = Object.keys(vals).length === KEYS_ARR.length;
  return { complete, vals, answers };
}

function computeWeightedPct(v) {
  let acc = 0;
  for (const k in W) acc += toPct(v[k]) * W[k];
  return acc / WEIGHT_SUM; // normalize
}
function minCategoryPct(v) {
  let m = 1;
  for (const k in W) m = Math.min(m, toPct(v[k]));
  return m;
}

function countFlags(v) {
  let f = 0;
  if (v.prenup <= 15) f++;
  if (v.home == 5) f++;
  if (v.bizuse <= 5) f++;
  if (v.tax <= 15) f++;
  if (v.crypto <= 5 && v.crypto < 70) f++;
  if (v.debt <= 15) f++;
  if (v.banking <= 15) f++;
  if (v.rentals <= 15) f++;
  if (v.retire <= 15) f++;
  if (v.incomesplit <= 30) f++; // single-earner/high dependency
  if (v.years <= 30) f++;       // 15+ years
  if (v.kids <= 50) f++;        // 3+ dependents
  return f;
}
function applyCaps(s, f) {
  if (f >= 7) s = Math.min(s, 650);
  else if (f >= 5) s = Math.min(s, 710);
  else if (f >= 3) s = Math.min(s, 750);
  return s;
}
function compute(v) {
  const w = computeWeightedPct(v);
  const b = minCategoryPct(v);
  let base = 300 + Math.round((0.85 * w + 0.15 * b) * 550);
  const f = countFlags(v);
  base = applyCaps(base, f);
  let score = base - 18 * f;
  score = Math.max(SCORE_MIN, Math.min(SCORE_MAX, score));
  return { score, flags: f };
}
function bandLabel(s) {
  if (s >= 720) return "Low";
  if (s >= 580) return "Moderate";
  return "High";
}
function bandColor(s) {
  if (s >= 720) return "#0f9d58";
  if (s >= 580) return "#fb8c00";
  return "#d93025";
}
function messageByRange(score){
  if (score >= 800) return "You‚Äôre in a strong position. Keep documents current and review on major life changes.";
  if (score >= 720) return "Solid foundation. A few small cleanups will further de-risk your setup.";
  if (score >= 650) return "Generally okay, but some items are worth tightening to avoid avoidable disputes.";
  if (score >= 580) return "Moderate exposure. Address the top gaps now to materially lower risk.";
  if (score >= 520) return "Heightened exposure. Prioritize separating accounts and shoring up documentation.";
  if (score >= 480) return "High exposure. Several areas invite challenges; a focused plan will help.";
  if (score >= 440) return "Significant exposure. Multiple weak spots; structured changes are recommended.";
  if (score >= 400) return "Very high exposure. Start with the biggest gaps to reduce near-term risk.";
  return "Critical exposure. Immediate corrective steps are strongly recommended.";
}

// --- UI helpers ---
function highlightMissing(){
  document.querySelectorAll('fieldset[data-key]').forEach(fs=>{
    const missing = !fs.querySelector('input[type="radio"]:checked');
    fs.classList.toggle('error', missing);
  });
}

// Smoothly update gauge
function updateGauge(score){
  const max=565.48, percent=(score-300)/550, clamped=Math.max(0,Math.min(1,percent));
  const offset=max-(max*clamped);
  const arc=document.getElementById('progressArc');
  if (arc){ arc.style.strokeDashoffset=offset; arc.style.stroke=bandColor(score); }
}

// --- main compute & wire ---
function runCompute(){
  const { complete, vals, answers } = collectAnswers();
  if (!complete){
    document.getElementById('formHint').style.display='block';
    highlightMissing();
    // focus next unanswered instead of computing
    focusNextUnanswered();
    return;
  }
  document.getElementById('formHint').style.display='none';
  const { score, flags } = compute(vals);
  const band = bandLabel(score) + " exposure";

  // visuals
  updateGauge(score);
  document.getElementById('gaugeNumber').textContent = score;
  document.getElementById('gaugeBand').textContent = band;
  const pill = document.getElementById('bandPill');
  if (pill){
    pill.textContent = band;
    pill.style.border = `1px solid ${bandColor(score)}22`;
  }
  const msg = document.getElementById('messageText');
  if (msg) msg.textContent = messageByRange(score);

  // dynamic explanation under the gauge
  const explanation = document.getElementById('scoreExplanation');
  if (explanation){
    if (flags >= 10 || score < 480){
      explanation.textContent = "This is the highest level of exposure. We flagged 10+ risks, meaning your current setup is extremely vulnerable. The lack of prenup, joint property, shared debts, and messy taxes all combine to put you at maximum risk. But even here, small corrections add up. The sooner you act, the sooner you limit the damage. Our Premium service is not optional ‚Äî it‚Äôs urgent.";
    } else if (flags >= 5 || score < 650){
      explanation.textContent = "We flagged several areas of concern. While not everything is critical, your current mix of joint ownership, shared accounts, and patchy documentation leaves you exposed. The good news: targeted corrections in just a few areas can meaningfully reduce your risk. We recommend starting with the most urgent fixes, then moving step by step.";
    } else if (flags >= 2 || score < 720){
      explanation.textContent = "Your setup shows both strengths and weaknesses. Some protections are in place ‚Äî perhaps a prenup, or clean business separation ‚Äî but gaps remain. These could become costly if challenged. With a few smart adjustments now, you could shift firmly into the low-risk category. Our tailored review is designed exactly for this situation.";
    } else {
      explanation.textContent = "Overall, your setup is strong and relatively low-risk. Clear separation of accounts, documentation, and ownership records are working in your favor. Even so, life changes ‚Äî moves, children, new assets ‚Äî can shift the balance. Keeping everything updated is key to staying protected. A quick review can confirm your good standing.";
    }
  }

  // persist
  localStorage.setItem('des_score', score);
  localStorage.setItem('des_band', band);
  localStorage.setItem('des_flags', flags);
  localStorage.setItem('des_answers', JSON.stringify(answers));

  // enable CTAs
  ['toPhase2','toPremium'].forEach(id=>{
    const a = document.getElementById(id);
    if(!a) return;
    a.classList.remove('disabled');
    a.setAttribute('aria-disabled','false');
    a.removeAttribute('tabindex');
  });

  // scroll to gauge
  const resultsEl = document.getElementById('results');
  if (resultsEl && resultsEl.scrollIntoView){
    resultsEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
}

// Focus next unanswered fieldset
function focusNextUnanswered(){
  const sets = Array.from(document.querySelectorAll('fieldset[data-key]'));
  const next = sets.find(fs => !fs.querySelector('input[type="radio"]:checked'));
  if (next){
    next.scrollIntoView({ behavior: 'smooth', block: 'center' });
    const first = next.querySelector('input[type="radio"]');
    if (first) { try { first.focus(); } catch(e){} }
  } else {
    // All answered: guide user to the Calculate button
    const btn = document.querySelector('#questionnaire .btn.primary');
    if (btn){
      btn.scrollIntoView({ behavior: 'smooth', block: 'center' });
      try { btn.focus(); } catch(e){}
    }
  }
}

// On change: jump to next unanswered (do NOT compute)
document.addEventListener('change', (e)=>{
  if(e.target && e.target.matches('input[type="radio"]')) focusNextUnanswered();
});

// Init: ensure CTAs disabled & not clickable until score exists
document.addEventListener('DOMContentLoaded', ()=>{
  const a1 = document.getElementById('toPhase2');
  const a2 = document.getElementById('toPremium');
  if (a1){ a1.href='#'; a1.classList.add('disabled'); a1.setAttribute('aria-disabled','true'); a1.setAttribute('tabindex','-1'); }
  if (a2){ a2.href='#'; a2.classList.add('disabled'); a2.setAttribute('aria-disabled','true'); a2.setAttribute('tabindex','-1'); }
});
</script>
</body>
</html>
